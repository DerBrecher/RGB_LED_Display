#ifndef WS2812_DISPLAY_h
#define WS2812_DISPLAY_h
#include <Arduino.h> 
#include <FastLED.h>

#define DISPLAY_HEIGHT 5
#define DISPLAY_WIDTH 19
#define STRING_DISPLAY_MAX_LENGTH 28

class Display {
	public:
		Display(CRGB ledDisplay[][DISPLAY_HEIGHT], CRGB leds[], bool invertDisplay);
					
		int setCharColor(int charNo, CRGB charColor);
		int setStringColor(CRGB newStringColor);
		void clear();
		void show();
		void shiftFrame();
		void setString(char* newString);
		char* getString();
		int getStringLength();
		
		void test(); //only used for debbuging		
	protected:
		char* string = {"This was a great test"};
		int strLength;
    bool inverted = false;
		
		int frameOffset = 0;
		CRGB frameBuffer[STRING_DISPLAY_MAX_LENGTH * 4][DISPLAY_HEIGHT];
		
		void updateFrame();
		
		CRGB (*pLedDisplay)[DISPLAY_HEIGHT];
		CRGB  *pLeds;
		CRGB charColor[STRING_DISPLAY_MAX_LENGTH];
		
		uint8_t dic[255];
		
		uint8_t font5by3[67][5][3] = {
			//----- Numbers -----
			{ //zero 
				{1,1,1},
				{1,0,1},
				{1,0,1},
				{1,0,1},
				{1,1,1}
			},
			{ //one
				{0,1,0},
				{1,1,0},
				{0,1,0},
				{0,1,0},
				{1,1,1}
			},
			{ //two
				{1,1,0},
				{0,0,1},
				{0,1,0},
				{1,0,0},
				{1,1,1}
			},
			{ //three
				{1,1,1},
				{0,0,1},
				{1,1,1},
				{0,0,1},
				{1,1,1}
			},
			{ //four
				{1,0,1},
				{1,0,1},
				{1,1,1},
				{0,0,1},
				{0,0,1}
			},
			{ //five
				{1,1,1},
				{1,0,0},
				{1,1,1},
				{0,0,1},
				{1,1,1}
			},
			{ //six
				{1,1,1},
				{1,0,0},
				{1,1,1},
				{1,0,1},
				{1,1,1}
			},
			{ //seven
				{1,1,1},
				{0,0,1},
				{0,1,0},
				{0,1,0},
				{0,1,0}
			},
			{ //eight
				{1,1,1},
				{1,0,1},
				{1,1,1},
				{1,0,1},
				{1,1,1}
			},
			{ //nine
				{1,1,1},
				{1,0,1},
				{1,1,1},
				{0,0,1},
				{1,1,1}
			},
			//----- Letters -----
			{ //A
				{1,1,1},
				{1,0,1},
				{1,1,1},
				{1,0,1},
				{1,0,1}
			},
			{ //B
				{1,1,0},
				{1,0,1},
				{1,1,0},
				{1,0,1},
				{1,1,0}
			},
			{ //C
				{0,1,0},
				{1,0,1},
				{1,0,0},
				{1,0,1},
				{0,1,0}
			},
			{ //D
				{1,1,0},
				{1,0,1},
				{1,0,1},
				{1,0,1},
				{1,1,0}
			},
			{ //E
				{1,1,1},
				{1,0,0},
				{1,1,1},
				{1,0,0},
				{1,1,1}
			},
			{ //F
				{1,1,1},
				{1,0,0},
				{1,1,1},
				{1,0,0},
				{1,0,0}
			},
			{ //G
				{0,1,1},
				{1,0,0},
				{1,0,0},
				{1,0,1},
				{0,1,1}
			},
			{ //H
				{1,0,1},
				{1,0,1},
				{1,1,1},
				{1,0,1},
				{1,0,1}
			},
			{ //I 
				{1,1,1},
				{0,1,0},
				{0,1,0},
				{0,1,0},
				{1,1,1}
			},
			{ //J
				{0,0,1},
				{0,0,1},
				{0,0,1},
				{1,0,1},
				{0,1,0}
			},
			{ //K
				{1,0,1},
				{1,0,1},
				{1,1,0},
				{1,0,1},
				{1,0,1}
			},
			{ //L
				{1,0,0},
				{1,0,0},
				{1,0,0},
				{1,0,0},
				{1,1,1}
			},
			{ //M
				{1,0,1},
				{1,1,1},
				{1,0,1},
				{1,0,1},
				{1,0,1}
			},
			{ //N
				{1,1,0},
				{1,0,1},
				{1,0,1},
				{1,0,1},
				{1,0,1}
			},
			{ //O
				{0,1,0},
				{1,0,1},
				{1,0,1},
				{1,0,1},
				{0,1,0}
			},
			{ //P
				{1,1,0},
				{1,0,1},
				{1,1,0},
				{1,0,0},
				{1,0,0}
			},
			{ //Q 
				{0,1,0},
				{1,0,1},
				{1,0,1},
				{1,1,1},
				{0,1,1}
			},
			{ //R
				{1,1,0},
				{1,0,1},
				{1,1,0},
				{1,0,1},
				{1,0,1}
			},
			{ //S
				{0,1,1},
				{1,0,0},
				{0,1,0},
				{0,0,1},
				{1,1,0}
			},
			{ //T
				{1,1,1},
				{0,1,0},
				{0,1,0},
				{0,1,0},
				{0,1,0}
			},
			{ //U
				{1,0,1},
				{1,0,1},
				{1,0,1},
				{1,0,1},
				{1,1,1}
			},
			{ //V
				{1,0,1},
				{1,0,1},
				{1,0,1},
				{1,1,1},
				{0,1,0}
			},
			{ //W
				{1,0,1},
				{1,0,1},
				{1,0,1},
				{1,1,1},
				{1,0,1}
			},
			{ //X
				{1,0,1},
				{1,0,1},
				{0,1,0},
				{1,0,1},
				{1,0,1}
			},
			{ //Y
				{1,0,1},
				{1,0,1},
				{1,1,1},
				{0,1,0},
				{0,1,0}
			},
			{ //Z
				{1,1,1},
				{0,0,1},
				{0,1,0},
				{1,0,0},
				{1,1,1}
			},
			//----- Symbols -----
			{ //Space
				{0,0,0},
				{0,0,0},
				{0,0,0},
				{0,0,0},
				{0,0,0}
			},
			{ //.
				{0,0,0},
				{0,0,0},
				{0,0,0},
				{0,0,0},
				{1,0,0}
			},
			{ //,
				{0,0,0},
				{0,0,0},
				{0,0,0},
				{0,1,0},
				{1,0,0}
			},
			{ //"
				{1,0,1},
				{1,0,1},
				{0,0,0},
				{0,0,0},
				{0,0,0}
			},
			{ //?
				{1,1,0},
				{0,0,1},
				{0,1,0},
				{0,0,0},
				{0,1,0}
			},
			{ //!
				{0,1,0},
				{0,1,0},
				{0,1,0},
				{0,0,0},
				{0,1,0}
			},
			{ //_
				{0,0,0},
				{0,0,0},
				{0,0,0},
				{0,0,0},
				{1,1,1}
			},
			{ //*
				{0,0,0},
				{1,0,1},
				{0,1,0},
				{1,0,1},
				{0,0,0}
			},
			{ //#
				{1,0,1},
				{1,1,1},
				{1,0,1},
				{1,1,1},
				{1,0,1}
			},
			{ //$
				{0,1,1},
				{1,1,0},
				{0,1,0},
				{0,1,1},
				{1,1,0}
			},
			{ //%
				{1,0,0},
				{0,0,1},
				{0,1,0},
				{1,0,0},
				{0,0,1}
			},
			{ //&
				{0,1,1},
				{1,0,0},
				{0,1,1},
				{1,0,1},
				{0,1,1}
			},
			{ //(
				{0,0,1},
				{0,1,0},
				{0,1,0},
				{0,1,0},
				{0,0,1}
			},
			{ //)
				{1,0,0},
				{0,1,0},
				{0,1,0},
				{0,1,0},
				{1,0,0}
			},
			{ //+
				{0,0,0},
				{0,1,0},
				{1,1,1},
				{0,1,0},
				{0,0,0}
			},
			{ //-
				{0,0,0},
				{0,0,0},
				{1,1,1},
				{0,0,0},
				{0,0,0}
			},
			{ ///
				{0,0,1},
				{0,0,1},
				{0,1,0},
				{1,0,0},
				{1,0,0}
			},
			{ //:
				{0,0,0},
				{0,1,0},
				{0,0,0},
				{0,1,0},
				{0,0,0}
			},
			{ //;
				{0,0,0},
				{0,1,0},
				{0,0,0},
				{0,1,0},
				{1,0,0}
			},
			{ //<
				{0,0,1},
				{0,1,0},
				{1,0,0},
				{0,1,0},
				{0,0,1}
			},
			{ //=
				{0,0,0},
				{1,1,1},
				{0,0,0},
				{1,1,1},
				{0,0,0}
			},
			{ //>
				{1,0,0},
				{0,1,0},
				{0,0,1},
				{0,1,0},
				{1,0,0}
			},
			{ //[
				{0,1,1},
				{0,1,0},
				{0,1,0},
				{0,1,0},
				{0,1,1}
			},
			{ // Backslash
				{1,0,0},
				{1,0,0},
				{0,1,0},
				{0,0,1},
				{0,0,1}
			},
			{ // ]
				{1,1,0},
				{0,1,0},
				{0,1,0},
				{0,1,0},
				{1,1,0}
			},
			{ // ^
				{0,1,0},
				{1,0,1},
				{0,0,0},
				{0,0,0},
				{0,0,0}
			},
			{ // `
				{1,0,0},
				{0,1,0},
				{0,0,0},
				{0,0,0},
				{0,0,0}
			},
			{ // {
				{0,1,1},
				{0,1,0},
				{1,1,0},
				{0,1,0},
				{0,1,1}
			},
			{ // |
				{0,1,0},
				{0,1,0},
				{0,1,0},
				{0,1,0},
				{0,1,0}
			},
			{ // }
				{1,1,0},
				{0,1,0},
				{0,1,1},
				{0,1,0},
				{1,1,0}
			},
			{ // ~
				{0,0,0},
				{0,1,1},
				{1,1,0},
				{0,0,0},
				{0,0,0}
			}
		};
};

#endif